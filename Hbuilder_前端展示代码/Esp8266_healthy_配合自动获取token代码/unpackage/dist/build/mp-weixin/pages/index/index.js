"use strict";const t=require("../../common/vendor.js"),e=require("../../common/assets.js"),o={data:()=>({heart:"--",o2:"--",tem:"--",hum:"--",socketTask:null,connectionStatus:"未连接"}),onLoad(){this.connectWebSocket()},methods:{connectWebSocket(){this.socketTask=t.index.connectSocket({url:"wss://c1f2-219-128-230-148.ngrok-free.app",success:()=>{console.log("WebSocket 连接成功"),this.connectionStatus="已连接"}}),this.socketTask.onOpen((()=>{console.log("WebSocket 已打开")})),this.socketTask.onMessage((t=>{const e=JSON.parse(t.data);this.heart=e.heart,this.o2=e.o2,this.tem=e.tem,this.hum=e.hum})),this.socketTask.onError((()=>{console.error("WebSocket 连接失败"),this.connectionStatus="连接失败"})),this.socketTask.onClose((()=>{console.log("WebSocket 已关闭"),this.connectionStatus="已断开"}))}},onUnload(){this.socketTask&&this.socketTask.close()}};const s=t._export_sfc(o,[["render",function(o,s,c,n,a,r){return{a:e._imports_0,b:t.t(a.connectionStatus),c:t.t(a.heart),d:t.t(a.o2),e:t.t(a.tem),f:t.t(a.hum)}}]]);wx.createPage(s);
